<html>
<head>
</head>
<body>
<canvas id="myCanvas" width="800" height="550" style="margin:0;padding:0;"></canvas>

<script type="text/javascript" language="javascript">
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

var levelCount = 0;
var drawlevels = [draw1,draw2,draw3,draw4,draw5];
var leveldata = [level1, level2,level3,level4,level5];
var holeCoords = new Array();
var plugImages = new Array();
var plugs = new Array();
var winplugs = new Array();
var currentPlug;
var currentHole;
var win;
var winCount;

function setup(){
	leveldata[levelCount]();
	drawlevels[levelCount]();
}

function level1(){
	holeCoords = [
		{'x' : 100, 'y' : 100},
		{'x' : 650, 'y' : 100},
		{'x' :  80, 'y' : 390, 'plug' : 0},
		{'x' : 480, 'y' : 390, 'plug' : 1}]

	//var plugImages = new Array();
	plugImages[0] = new Image();
	plugImages[0].src = 'assets/a.png';
	plugImages[1] = new Image();
	plugImages[1].src = 'assets/b.png';

	plugs = [0,1,-1,-1];
	winplugs = [0,0,0,0];
	currentPlug = -1;
	currentHole = -1;
	win=false;
	winCount = 0;
}

function level2(){
	holeCoords = [
		{'x' : 100, 'y' : 100},
		{'x' : 100, 'y' : 170},
		{'x' : 650, 'y' : 100},
		{'x' : 650, 'y' : 170},
		{'x' :  70, 'y' : 390, 'plug' : 0},
		{'x' : 480, 'y' : 390, 'plug' : 3},
		{'x' : 70, 'y' : 480, 'plug' : 2}]

	plugImages = new Array();
	plugImages[0] = new Image();
	plugImages[0].src = 'assets/a.png';
	plugImages[1] = new Image();
	plugImages[1].src = 'assets/b.png';
	plugImages[2] = new Image();
	plugImages[2].src = 'assets/aunionb.png';
	plugImages[3] = new Image();
	plugImages[3].src = 'assets/aintersectb.png';

	plugs = [0,1,2,3,-1,-1,-1];
	winplugs = [0,0,0,0,0,0];
	currentPlug = -1;
	currentHole = -1;
	win=false;
}

function level3(){
	holeCoords = [
		{'x' : 100, 'y' : 100},
		{'x' : 100, 'y' : 170},
		{'x' : 100, 'y' : 240},
		{'x' : 650, 'y' : 100},
		{'x' : 650, 'y' : 170},
		{'x' :  80, 'y' : 390, 'plug' : 3},
		{'x' : 480, 'y' : 390, 'plug' : 0},
		{'x' : 140, 'y' : 480, 'plug' : 1},
		{'x' : 210, 'y' : 480, 'plug' : 2},
		{'x' : 520, 'y' : 480, 'plug' : 4}]

	plugImages = new Array();
	plugImages[0] = new Image();
	plugImages[0].src = 'assets/a.png';
	plugImages[1] = new Image();
	plugImages[1].src = 'assets/elementof.png';
	plugImages[2] = new Image();
	plugImages[2].src = 'assets/aintersectb.png';
	plugImages[3] = new Image();
	plugImages[3].src = 'assets/b.png';
	plugImages[4] = new Image();
	plugImages[4].src = 'assets/notelementof.png';
	//plugImages[3] = new Image();
	//plugImages[3].src = 'assets/b.png';

	plugs = [0,1,2,3,4,-1,-1,-1,-1,-1];
	winplugs = [0,0,0,0,0,0,0,0,0,0];
	currentPlug = -1;
	currentHole = -1;
	win=false;
}

function level4(){
	holeCoords = [
	{'x' : 100, 'y' : 100},
	{'x' : 100, 'y' : 170},
	{'x' : 100, 'y' : 240},
	{'x' : 650, 'y' : 100},
	{'x' : 650, 'y' : 170},
	{'x' :  130, 'y' : 390, 'plug' : 1},
	{'x' : 200, 'y' : 390, 'plug' : 4},
	{'x' : 460, 'y' : 390, 'plug' : 2},
	{'x' : 120, 'y' : 480, 'plug' : 0},
	{'x' : 220, 'y' : 480, 'plug' : 3}]

	plugImages = new Array();
	plugImages[0] = new Image();
	plugImages[0].src = 'assets/aintersectb.png';
	plugImages[1] = new Image();
	plugImages[1].src = 'assets/elementof.png';
	plugImages[2] = new Image();
	plugImages[2].src = 'assets/aunionb.png';
	plugImages[3] = new Image();
	plugImages[3].src = 'assets/emptyset.png';
	plugImages[4] = new Image();
	plugImages[4].src = 'assets/b.png';


	plugs = [0,1,2,3,4,-1,-1,-1,-1,-1];
	winplugs = [0,0,0,0,0,0,0,0,0,0];
	currentPlug = -1;
	currentHole = -1;
	win=false;
}

function level5(){
	holeCoords = [
	{'x' : 100, 'y' : 100},
	{'x' : 100, 'y' : 170},
	{'x' : 100, 'y' : 240},
	{'x' : 650, 'y' : 100},
	{'x' : 650, 'y' : 170},
	{'x' : 650, 'y' : 240},
	{'x' :  80, 'y' : 390, 'plug' : 0},
	{'x' : 560, 'y' : 390, 'plug' : 1},
	{'x' :  110, 'y' : 460, 'plug' : 3}, 
	{'x' : 560, 'y' : 460, 'plug' : 4}]

	plugImages = new Array();
	plugImages[0] = new Image();
	plugImages[0].src = 'assets/aintersectb.png';
	plugImages[1] = new Image();
	plugImages[1].src = 'assets/subset.png';
	plugImages[2] = new Image();
	plugImages[2].src = 'assets/notelementof.png';
	plugImages[3] = new Image();
	plugImages[3].src = 'assets/elementof.png';
	plugImages[4] = new Image();
	plugImages[4].src = 'assets/notsubsetof.png';
	plugImages[5] = new Image();
	plugImages[5].src = 'assets/aunionc.png';


	plugs = [0,1,2,3,4,5,-1,-1,-1,-1];
	winplugs = [0,0,0,0,0,0];
	currentPlug = -1;
	currentHole = -1;
	win=false;
}

function draw1(){
	ctx.fillStyle = "#F0FFFF";
	ctx.fillRect(0, 0, canvas.width, canvas.height);

	//circle A
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)-110, (canvas.height)/2-50, 100, 0, 2 * Math.PI);
	ctx.stroke();

	//circle B
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)+110, (canvas.height)/2-50,100,0,2 * Math.PI);
	ctx.stroke();

	ctx.font = "30px Arial";
	ctx.textAlign = "center";
	ctx.fillStyle = "#FF7F50";
	ctx.fillText("Level 1",(canvas.width)/2, 30);
	ctx.fillText("A", 290, 110);
	ctx.fillText("B", 510,110);
	//ctx.fillText("C", 560,370);
	ctx.fillText("3", 340,220);
	ctx.fillText("7", 250,220)
	ctx.fillText("11", 300,280);
	ctx.fillText("8", 500,200);
	ctx.fillText("18", 550,280);
	ctx.fillText("?", 650,30);
	ctx.fillText("1.           = {3,7,11}", 150, 430);
	ctx.fillText("2.           = {8,18}", 550, 430);
	ctx.fillText("Next", 720,30);
	//alert(currentPlug);
	for(var i=0; i<holeCoords.length;i++)
    {
    	ctx.strokeRect(holeCoords[i].x, holeCoords[i].y, 51, 51);
    }

    for (var i=0; i<plugs.length; i++) {
    	if (plugs[i] != -1) { 
    		ctx.drawImage (plugImages[plugs[i]] , holeCoords[i].x, holeCoords[i].y, 50, 50 );
    	}
    }

    if (currentPlug != -1) {
    	// draw current plug (being dragged) at mouse position (mouseX,mouseY)
    	ctx.drawImage ( plugImages[currentPlug] , mouseX-25, mouseY-25, 50, 50);

    }
}

function draw2(){
	ctx.fillStyle = "#F0FFFF";
	ctx.fillRect(0, 0, canvas.width, canvas.height);

	//circle A
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)-60, (canvas.height)/2-50, 100, 0, 2 * Math.PI);
	ctx.stroke();

	//circle B
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)+60, (canvas.height)/2-50,100,0,2 * Math.PI);
	ctx.stroke();

	ctx.font = "30px Arial";
	ctx.textAlign = "center";
	ctx.fillStyle = "#FF7F50";
	ctx.fillText("Level 2",(canvas.width)/2, 30);
	ctx.fillText("A", 330, 110);
	ctx.fillText("B", 470,110);
	ctx.fillText("6", 400,270);
	ctx.fillText("12", 400,220);
	ctx.fillText("2", 280,210)
	ctx.fillText("4", 300,280);
	ctx.fillText("3", 500,200);
	ctx.fillText("9", 510,280);
	ctx.fillText("?", 650,30);
	ctx.fillText("1.           = {2,4,6,12}", 150, 430);
	ctx.fillText("2.           = {6,12}", 550, 430);
	ctx.fillText("3.           = {2,3,4,6,9,12}", 180, 520);
	ctx.fillText("Next", 720,30);

	for(var i=0; i<holeCoords.length;i++)
    {
    	ctx.strokeRect(holeCoords[i].x, holeCoords[i].y, 51, 51);
    }

    for (var i=0; i<plugs.length; i++) {
    	if (plugs[i] != -1) { 
    		ctx.drawImage ( plugImages[plugs[i]] , holeCoords[i].x, holeCoords[i].y, 50, 50 );
    	}
    }

    if (currentPlug != -1) {
    	// draw current plug (being dragged) at mouse position (mouseX,mouseY)
    	ctx.drawImage ( plugImages[currentPlug] , mouseX-25, mouseY-25, 50, 50);
    }
}

function draw3(){
	ctx.fillStyle = "#F0FFFF";
	ctx.fillRect(0, 0, canvas.width, canvas.height);

	//circle A
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)-60, (canvas.height)/2-50, 100, 0, 2 * Math.PI);
	ctx.stroke();

	//circle B
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)+60, (canvas.height)/2-50,100,0,2 * Math.PI);
	ctx.stroke();

	ctx.font = "30px Arial";
	ctx.textAlign = "center";
	ctx.fillStyle = "#FF7F50";
	ctx.fillText("Level 3",(canvas.width)/2, 30);
	ctx.fillText("A", 330, 110);
	ctx.fillText("B", 470,110);
	//ctx.fillText("6", 400,270);
	ctx.fillText("10", 400,220);
	ctx.fillText("4", 280,210)
	ctx.fillText("6", 300,280);
	ctx.fillText("5", 500,200);
	//ctx.fillText("9", 510,280);
	ctx.fillText("?", 650,30);
	ctx.fillText("1.           = {5,10}", 150, 430);
	ctx.fillText("2.           = {4,6,10}", 550, 430);
	ctx.fillText("3. 10                      ", 180, 520);
	ctx.fillText("4. 7           A \u222A B", 550, 520);
	ctx.fillText("Next", 720,30);

	for(var i=0; i<holeCoords.length;i++)
    {
    	ctx.strokeRect(holeCoords[i].x, holeCoords[i].y, 51, 51);
    }

    for (var i=0; i<plugs.length; i++) {
    	if (plugs[i] != -1) { 
    		ctx.drawImage ( plugImages[plugs[i]] , holeCoords[i].x, holeCoords[i].y, 50, 50 );
    	}
    }

    if (currentPlug != -1) {
    	// draw current plug (being dragged) at mouse position (mouseX,mouseY)
    	ctx.drawImage ( plugImages[currentPlug] , mouseX-25, mouseY-25, 50, 50);
    }
}

function draw4(){
	ctx.fillStyle = "#F0FFFF";
	ctx.fillRect(0, 0, canvas.width, canvas.height);

	//circle A
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)-60, (canvas.height)/2-50, 100, 0, 2 * Math.PI);
	ctx.stroke();

	//circle B
	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)+60, (canvas.height)/2-50,100,0,2 * Math.PI);
	ctx.stroke();

	ctx.font = "30px Arial";
	ctx.textAlign = "center";
	ctx.fillStyle = "#FF7F50";
	ctx.fillText("Level 4",(canvas.width)/2, 30);
	ctx.fillText("A", 330, 110);
	ctx.fillText("B", 470,110);
	//ctx.fillText("6", 400,270);
	//ctx.fillText("12", 400,220);
	ctx.fillText("2", 280,210)
	ctx.fillText("4", 300,280);
	ctx.fillText("1", 500,200);
	ctx.fillText("5", 480,270);
	ctx.fillText("3", 530,250);
	ctx.fillText("?", 650,30);
	ctx.fillText("        1. 5                      ", 150, 430);
	ctx.fillText("2.           = {1,2,3,4,5}", 550, 430);
	ctx.fillText("3.           =           ", 180, 520);
	ctx.fillText("Next", 720,30);

	for(var i=0; i<holeCoords.length;i++)
    {
    	ctx.strokeRect(holeCoords[i].x, holeCoords[i].y, 51, 51);
    }

    for (var i=0; i<plugs.length; i++) {
    	if (plugs[i] != -1) { 
    		ctx.drawImage ( plugImages[plugs[i]] , holeCoords[i].x, holeCoords[i].y, 50, 50 );
    	}
    }

    if (currentPlug != -1) {
    	// draw current plug (being dragged) at mouse position (mouseX,mouseY)
    	ctx.drawImage ( plugImages[currentPlug] , mouseX-25, mouseY-25, 50, 50);
    }
}

function draw5(){
	ctx.fillStyle = "#F0FFFF";
	ctx.fillRect(0, 0, canvas.width, canvas.height);

	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)-60, (canvas.height)/2, 100, 0, 2 * Math.PI);
	ctx.stroke();

	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2)+60, (canvas.height)/2,100,0,2 * Math.PI);
	ctx.stroke();

	ctx.beginPath();
	//ctx.arc(Xcoord, Ycoord, size,)
	ctx.arc(((canvas.width)/2), ((canvas.height)/2)-100,100,0,2 * Math.PI);
	ctx.stroke();

	ctx.font = "30px Arial";
	ctx.textAlign = "center";
	ctx.fillStyle = "#FF7F50";
	ctx.fillText("Level 5",(canvas.width)/2, 30);
	ctx.fillText("A", 400,70);
	ctx.fillText("B", 240,370);
	ctx.fillText("C", 560,370);
	ctx.fillText("3", 400,150);
	ctx.fillText("6", 450,220)
	ctx.fillText("2", 480,300);
	ctx.fillText("5", 310,330);
	ctx.fillText("35", 280,280);
	ctx.fillText("10", 400,310);
	ctx.fillText("?", 650,30);
	ctx.fillText("Next", 720,30);
	ctx.fillText("1.           = \u2205", 120, 430);
	ctx.fillText("2. {5,35}            B", 550, 430);
	ctx.fillText("3. 2           C", 120, 500);
	ctx.fillText("4. {2,3}           A", 550, 500);

	for(var i=0; i<holeCoords.length;i++)
    {
    	ctx.strokeRect(holeCoords[i].x, holeCoords[i].y, 51, 51);
    }

    for (var i=0; i<plugs.length; i++) {
    	if (plugs[i] != -1) { 
    		ctx.drawImage ( plugImages[plugs[i]] , holeCoords[i].x, holeCoords[i].y, 50, 50 );
    	}
    }

    if (currentPlug != -1) {
    	// draw current plug (being dragged) at mouse position (mouseX,mouseY)
    	ctx.drawImage ( plugImages[currentPlug] , mouseX-25, mouseY-25, 50, 50);

    }

}


document.addEventListener("mousedown", mousedown, false);
document.addEventListener('mouseup',   mouseup,   false);

var mouseX;
var mouseY;

document.addEventListener('mousemove',   mousemove,   false);

document.addEventListener("click", hintButton, false);

document.addEventListener("click", nextButton, false);

function mousemove(event){
	// update mouseX and mouseY with new mouse position
	mouseX = event.clientX;
	mouseY = event.clientY;
	drawlevels[levelCount]();

}

	function mousedown(event) {
		//alert("test");
		pickUpPlug(event.clientX, event.clientY);
	}

	function mouseup(event) {
		dropPlug(event.clientX,event.clientY);
	}


	function pickUpPlug(x,y) {
		for(var i=0; i<holeCoords.length; i++){
			if (x>(holeCoords[i].x) & 
				x<(holeCoords[i].x+50) & 
				y>(holeCoords[i].y) & 
				y<(holeCoords[i].y+50) & 
				plugs[i] != -1){
				//PICK UP PLUG
				currentPlug = plugs[i];
				//Updating hole the currentPlug came from to 0
				plugs[i] = -1;
				currentHole = i;
		    	break
			}
		}
		drawlevels[levelCount]();
	}
	
	function dropPlug(x,y) {
		if (currentPlug != -1) {
			var plugDropped = false;
			for(var i=0; i<holeCoords.length; i++){
				if (x>(holeCoords[i].x) & 
					x<(holeCoords[i].x+50) & 
					y>(holeCoords[i].y) & 
					y<(holeCoords[i].y+50) &
					plugs[i] == -1){
					//drop plug in current hole
					//Updating hole with plug
					plugs[i] = currentPlug;
					//checking to see if correct plug is being dropped on correct hole
					if(holeCoords[i].plug == currentPlug){
						if(winplugs[currentPlug]==0){
							winCount = winCount +1;
						}
						winplugs[currentPlug]=1;
					}
					currentPlug = -1;
					currentHole = -1;
					plugDropped = true;
					//checking to see if every hole has a plug
					for(i=plugImages.length; i<plugs.length;i++){
						if(plugs[i] == -1){
							win = false;
							break;
						}
						else{
							if(winCount == (plugs.length-plugImages.length)){
								win=true;
							}
						}
					}
					if(win==true){
						if(levelCount == drawlevels.length-1){
							alert("Finished game!");
						}
						else{
							alert("Well done! Click 'Next' to continue");
						}
					}
			    	break
				}
			}
			if (!plugDropped) {
				// return plug to hole it originally came from
				plugs[currentHole] = currentPlug;
				currentPlug = -1;
				currentHole = -1;
			}
			drawlevels[levelCount]();
	    }
	}

	function hintButton(event){
		if(event.clientX>640 & event.clientX<670 & event.clientY>10 & event.clientY<40){
			alert("Drag and drop A and B into the relevant boxes");
		}
	}

	function nextButton(event){
		if(event.clientX>690 & event.clientX<760 & event.clientY>10 & event.clientY<40)
		{
			if(win==true){
				if(levelCount == drawlevels.length-1){
					alert("Finished game!");
				}
				//break
				else{
				levelCount = levelCount+1;
				winCount = 0;
				setup();
				}

			}
			else{
				alert("You're wrong haha. Use the hint button is you need help");
			}
		}
	}
setup();
</script>
</body>
</html>